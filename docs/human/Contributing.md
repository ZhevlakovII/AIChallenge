# Contributing Guide

Документ описывает правила внесения изменений в проект AIChallenge. Основан на AIChallenge-StyleGuide.md, .clinerules/Project-rules.md и сопровождающих документах (Architecture.md, ProjectStructure.md, CodingStandards.md).

Содержание:
- Рабочий процесс и ветвление
- Conventional Commits и оформление PR
- Требования к код-стайлу и документации
- Тестирование и качество
- Безопасность и секреты
- Чек-лист автора PR
- Ревью и принятие изменений

## Рабочий процесс и ветвление

- Основные ветки:
  - `main` — стабильная; только через PR и после успешных проверок.
  - `develop` (опционально) — интеграционная ветка.
- Фича-ветки:
  - `feat/<scope>-<short-name>` (например, `feat/history-screen`).
  - `fix/<scope>-<short-name>` для исправлений.
- Процесс:
  1) Создать ветку от main/develop.
  2) Внести изменения по одному логическому инкременту.
  3) Оформить коммиты по Conventional Commits.
  4) Открыть PR в main/develop с понятным описанием.

## Conventional Commits и PR

- Типы: `feat:`, `fix:`, `docs:`, `refactor:`, `test:`, `build:`, `ci:`, `chore:`.
- Примеры:
  - `feat(history): добавлен экран истории и навигация`
  - `fix(chat): исправлена утечка DTO в UI-модель`
- PR:
  - Заголовок = кратко и по делу.
  - Описание: цель, что изменено, ссылки на задачи/документы, скриншоты UI (если релевантно).
  - Малые PR предпочтительнее больших.

## Требования к код-стайлу и документации

- Следовать CodingStandards.md и Architecture.md.
- Структура фич: `features/<feature>/{di,domain,presentation,data}`.
- KDoc на русском для публичных API, классов и методов.
- DTO — только в Data, маппинг через extension-функции.
- Вынести общую логику в `shared` при повторном использовании.

## Тестирование и качество

- Unit-тесты:
  - Domain/Data — в `shared/src/commonTest/kotlin`.
  - UI/ViewModel — в `composeApp/src/commonTest/kotlin`.
- Проверить:
  - Мапперы DTO↔Domain (nullability/дефолты).
  - Обработку ошибок: `safeApiCall` → `DomainException`.
  - VM MVI-поток: события → состояние.
- Сборка должна быть “зелёной”, линтеры без ошибок.

## Безопасность и секреты

- Не коммитить секреты (ключи, токены, пароли).
- Маскирование секретов в логах обязательно (см. Security.md и Logging-Metrics.md).
- Конфиги окружений — через DI/переменные окружения, не в коде.

## Чек-лист автора PR

- [ ] Соблюдена структура слоёв и фич.
- [ ] KDoc добавлен/обновлён.
- [ ] Тесты добавлены/обновлены (Domain/Data/UI).
- [ ] Ошибки нормализуются к `DomainException`, `safeApiCall` используется.
- [ ] Логи без секретов, уровень логирования корректен.
- [ ] Документация обновлена (при необходимости).
- [ ] Сборка и тесты прошли локально.

## Ревью и принятие

- Ревьюер проверяет:
  - Архитектурные границы (DTO-изоляция, DIP).
  - Корректность MVI и KMP-размещения.
  - Качество тестов и покрытие кейсов ошибок.
  - Ясность кода и документации.
- Мердж:
  - Сквош-коммиты допустимы; сообщение о мердже в стиле Conventional Commits.
