# Продуктовый контекст

Мета:
- Последнее обновление: 2025-11-21
- Владелец документа: @ZhevlakovII
- Источник: [projectbrief.md](./projectbrief.md)

Резюме (TL;DR)
- Назначение документа: зафиксировать продуктовые цели, границы, пользователей и критерии успеха проекта.
- Назначение продукта (tagline): Kotlin Multiplatform DevX-песочница для создания LLM-клиента, локальных MCP-инструментов, серверов для общения с MCP/LLM и экспериментов с LLM при строгой архитектуре и воспроизводимости.
- Документ — часть банка памяти: технические детали в [techContext.md](./techContext.md), архитектурные решения — в [decisions/](./decisions/) и их следствия — в [systemPatterns.md](./systemPatterns.md).

1. Цели продукта
- Главные цели (3–5):
  - Провести качественные эксперименты с LLM (чат, инструменты, RAG).
  - Провести качественные эксперименты с KMP/CMP и серверной частью.
  - Создать собственного агента с MCP, RAG, качественным UX/UI и производительными приложениями под Android, iOS, Desktop (Windows, Linux, macOS).
- Драйверы (проблемы/возможности):
  - Непонимание работы LLM, включая MCP и RAG.
  - Отсутствие опыта с KMP и Jetpack Compose/Compose Multiplatform.
  - Недостаток опыта проектирования архитектуры проектов.
- KPI/метрики (MVP):
  - Производительность: p95 round-trip чата ≤ 2 c (без ожидания ответа от LLM); p95 вызова MCP ≤ 1 c.
  - Надёжность: ≥ 98% успешных операций; корректная обработка ошибок; возможность ретрая пользователем.
  - UX-время: «от начала до конца» (первый успешный сценарий) ≤ 2 мин.
  - Функциональная полнота: работоспособные Chat, MCP, RAG.

2. Пользователи и сценарии
- Персоны:
  - KMP-разработчик (frontend, проектирование/разработка).
  - Backend-разработчик (сервер, MCP-инструменты).
  - Аналитик (проектирование фич и MCP-tools совместно с разработчиками).
  - Тестировщик (проверка интеграций frontend↔backend↔LLM).
- Основные сценарии (user journeys):
  - Отправка сообщения в LLM → взаимодействие LLM с MCP/пользователем → получение ответа.
  - Просмотр доступных MCP-инструментов; добавление внешних MCP-серверов и их сохранение.
  - Просмотр метрик/логов.
  - Конфигурирование провайдера/LLM с сохранением конфигурации.
  - Создание напоминаний (в т.ч. через LLM) и выполнение напоминаний на клиенте.
  - История чатов: просмотр, выбор диалога, продолжение.
- Нефункциональные ожидания:
  - Производительность: p95 чат ≤ 2 c (без ожидания ответа LLM); p95 MCP ≤ 1 c.
  - Надёжность: ≥ 98% успешных операций; корректная деградация; офлайн — доступ к истории чатов и списку задач.
  - Безопасность: маскирование API-ключей/токенов; безопасное хранение данных на диске (шифрование, пароль при наличии); логирование секретов только в dev/debug режиме.
  - Удобство: плоская навигация; путь «от старта до результата» ≤ 2 мин.

3. Границы и допущения
- In Scope (ближайшие релизы):
  - Оркестрация, Chat, Settings, MCP (включая Multiple MCP), History, Reminder, RAG.
- Out of Scope (сейчас):
  - Облако/прод-хостинг.
- Допущения:
  - Локальная разработка; пользователь сам вводит настройки провайдера; GitHub-токен опционален.
  - Без обработки ПДн/PII.
  - Ключи не зашиваются в приложение; пользовательские ключи хранятся в зашифрованном виде.

4. Ограничения и требования
- Бизнес-ограничения:
  - Срок MVP: 30 дней.
  - Бюджет/лимиты внешних API: нет ограничений.
  - Лицензия: MIT.
- Регуляторика/соответствие:
  - ПДн/PII не обрабатываются.
  - Логирование секретов допускается только в dev/debug режиме; в прод-профилях запрещено.
- Технические ограничения (см. также [techContext.md](./techContext.md)):
  - Минимальные версии: JVM ≥ 21; Kotlin ≥ 2.2.21; Gradle ≥ 8.14; AGP ≥ 8.13.
  - Платформы: Android, iOS, Desktop (Windows, Linux, macOS).
  - Политика ключей: ключи вводит пользователь; хранение — в зашифрованном виде; не включать в репозиторий/билд.
  - Для iOS/Native нужны реализации поверх Kotlin/Native взамен JVM-зависимостей.

5. Конкурентная и смежная среда
- Альтернативы/аналоги:
  - ChatGPT Playground (chat.openai.com / chatgpt.com), DeepSeek Playground (chat.deepseek.com), Cline, Cursor, Qwen Playground (chat.qwen.ai).
- Отличия/позиционирование:
  - KMP + Internal MCP + External MCP, строгая архитектура, клиенты под Android/iOS/Desktop, RAG и настраиваемые конфигурации.

6. Релизы и дорожная карта
- Ближайшие релизы:
  - R0 (MVP): Оркестрация, Chat, MCP, Settings, Reminders.
  - R1: History, RAG, Metrics.
  - R2: Расширение оркестрации/UX, улучшения DevX.
- Эпики/фичи (приоритет MoSCoW):
  - Must: Оркестрация, Chat, Settings, Multiple MCP, History, Reminder, RAG.
  - Should: Metrics, UX/UI, сохранение/загрузка конфигов, продвинутые графы агентности.
  - Could: Multiple providers, сценарии автопланирования.
  - Won’t: Облако.

7. Риски и неопределенности
- Риски → стратегия смягчения:
  - Платформенные различия (Android/JVM/iOS/Kotlin/Native) → абстракции, выделение платформенных провайдеров, ранние прототипы.
  - Безопасное хранение (encrypted prefs/keystore) → использовать платформенные механизмы шифрования, секционирование логов, фича-флаги для dev логирования.
  - Сложность оркестрации/агентности → итеративные инкременты, контрактные тесты, метрики.
- Неизвестные:
  - Исследования не требуются.

8. Трассируемость
- Бриф: [projectbrief.md](./projectbrief.md)
- Сессии: [sessions/](./sessions/)
- Принятые решения (ADR): [decisions/](./decisions/)
- Системные паттерны/следствия: [systemPatterns.md](./systemPatterns.md)
- Документация: human — [../docs/human/](../docs/human/), llm — [../docs/llm/](../docs/llm/)

9. История изменений
- 2025-11-21: Заполнен документ по результатам интервью; добавлены цели, границы, персоны, KPI, дорожная карта и риски.

Примечания по оформлению
- Язык: RU. Даты: YYYY-MM-DD.
- Обновлять при изменениях целей/границ/метрик и при принятии ADR, влияющих на продуктовые решения.
